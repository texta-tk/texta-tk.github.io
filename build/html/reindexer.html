
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reindexer &#8212; TEXTA Toolkit 2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Health" href="health.html" />
    <link rel="prev" title="MLP" href="mlp.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/toolkit_logo.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="anonymizer.html">Anonymizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="importer.html">Dataset Importer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlp.html">MLP</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reindexer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creation">Creation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gui">GUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="health.html">Health</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="searcher.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="lexicon_miner.html">Lexicon Miner</a></li>
<li class="toctree-l1"><a class="reference internal" href="embedding.html">Embedding</a></li>
<li class="toctree-l1"><a class="reference internal" href="topic_analyzer.html">Topic Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="tagger.html">Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="tagger_group.html">Tagger Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex_tagger.html">Regex Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex_tagger_group.html">Regex Tagger Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="torch_tagger.html">Torch Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="bert_tagger.html">Bert Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="mlp.html" title="previous chapter">MLP</a></li>
      <li>Next: <a href="health.html" title="next chapter">Health</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p><a class="reference external" href="https://docs.texta.ee/v2/reindexer.html">EN</a>
<a class="reference external" href="https://docs.texta.ee/v2/et/reindexer.html">ET</a></p>
<div class="section" id="id1">
<h1>Reindexer<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Reindexer is a tool for making copies or subsets of Elasticsearch <a class="reference internal" href="terminology.html#index-concept"><span class="std std-ref">indices</span></a>. Reindexer can be used for various data management tasks:</p>
<ul class="simple">
<li><p>Making a copy of an index;</p></li>
<li><p>Merging multiple indices into one;</p></li>
<li><p>Making a random subset of an index;</p></li>
<li><p>Making a subset based on predefined <a class="reference internal" href="terminology.html#query-concept"><span class="std std-ref">query</span></a>;</p></li>
<li><p>Renaming fields;</p></li>
<li><p>Updating Elasticsearch <a class="reference internal" href="terminology.html#field-concept"><span class="std std-ref">field</span></a> types.</p></li>
</ul>
<div class="section" id="creation">
<h2>Creation<a class="headerlink" href="#creation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="parameters">
<span id="reindexer-creation-parameters"></span><h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><strong>description</strong>:</dt><dd><p>Name of the Reindexing task.</p>
</dd>
<dt><strong>indices</strong>:</dt><dd><p>List of Elasticsearch <a class="reference internal" href="terminology.html#index-concept"><span class="std std-ref">indices</span></a> (datasets) to reindex.</p>
</dd>
<dt><strong>fields</strong>:</dt><dd><p>List of fields to reindex, i.e. transfer to the new index. By default, all the fields in the source index are selected.</p>
</dd>
<dt><strong>query</strong>:</dt><dd><p>Specified Elasticsearch Search <a class="reference internal" href="terminology.html#query-concept"><span class="std std-ref">query</span></a>. If left empty (and <cite>random_size</cite> is not defined), all documents from the source index are transferred to the new one.</p>
</dd>
<dt><strong>new_index</strong>:</dt><dd><p>Name of the target index.</p>
</dd>
<dt><strong>random_size</strong>:</dt><dd><p>Random subset size. If defined, new index is constructed of given number of random documents. If left empty, all the documents in the source index (or in accordance with restricted search <a class="reference internal" href="terminology.html#query-concept"><span class="std std-ref">query</span></a>) are reindexed.</p>
</dd>
<dt><strong>field_type</strong>:</dt><dd><p>List of new Elasticsearch <a class="reference internal" href="terminology.html#field-concept"><span class="std std-ref">field</span></a> types in the following format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="nt">&quot;field_name&quot;</span><span class="p">:</span> <span class="s2">&quot;new_field_type&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="gui">
<h3>GUI<a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h3>
<p>For creating a new Reindexing task, navigate to <cite>“Tools” -&gt; “Reindexer”</cite> as seen in <a class="reference internal" href="#reindexer-navigation"><span class="std std-numref">Fig. 21</span></a>.</p>
<div class="figure align-center" id="id2">
<span id="reindexer-navigation"></span><a class="reference internal image-reference" href="_images/reindexer_nav.png"><img alt="_images/reindexer_nav.png" src="_images/reindexer_nav.png" style="width: 500pt;" /></a>
<p class="caption"><span class="caption-number">Fig. 21 </span><span class="caption-text"><em>Reindexer navigation</em></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>If the navigation is successful, you should see a panel similar to <a class="reference internal" href="#reindexer-create-button"><span class="std std-numref">Fig. 22</span></a> with <cite>“Create”</cite> button in the top left corner of the page.</p>
<div class="figure align-center" id="id3">
<span id="reindexer-create-button"></span><a class="reference internal image-reference" href="_images/reindexer_create_button.png"><img alt="_images/reindexer_create_button.png" src="_images/reindexer_create_button.png" style="width: 500pt;" /></a>
<p class="caption"><span class="caption-number">Fig. 22 </span><span class="caption-text"><em>Reindexer creation button</em></span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Clicking on the <cite>“Create”</cite> button opens a new modal window with title <cite>“New Reindexer”</cite> as depicted in <a class="reference internal" href="#reindexer-create-new"><span class="std std-numref">Fig. 23</span></a>.</p>
<div class="figure align-center" id="id4">
<span id="reindexer-create-new"></span><a class="reference internal image-reference" href="_images/reindexer_create_new.png"><img alt="_images/reindexer_create_new.png" src="_images/reindexer_create_new.png" style="width: 500pt;" /></a>
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text"><em>Empty Reindexer creation view</em></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Fill the required fields and click on the <cite>“Create”</cite> button in the bottom right corner of the window (<a class="reference internal" href="#reindexer-create"><span class="std std-numref">Fig. 24</span></a>).</p>
<div class="figure align-center" id="id5">
<span id="reindexer-create"></span><a class="reference internal image-reference" href="_images/reindexer_create.png"><img alt="_images/reindexer_create.png" src="_images/reindexer_create.png" style="width: 500pt;" /></a>
<p class="caption"><span class="caption-number">Fig. 24 </span><span class="caption-text"><em>Filled Reindexer creation view</em></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>The created Reindexer can now be seen as the first (or only, if no previous Reindexers exist under the <a class="reference internal" href="terminology.html#project-concept"><span class="std std-ref">project</span></a>) row in the table of Reindex tasks (<a class="reference internal" href="#reindexer-task-list"><span class="std std-numref">Fig. 25</span></a>).</p>
<div class="figure align-center" id="id6">
<span id="reindexer-task-list"></span><a class="reference internal image-reference" href="_images/reindexer_task_list.png"><img alt="_images/reindexer_task_list.png" src="_images/reindexer_task_list.png" style="width: 600pt;" /></a>
<p class="caption"><span class="caption-number">Fig. 25 </span><span class="caption-text"><em>List of Reindexer tasks.</em></span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>Reference:  <a class="reference external" href="http://localhost:8000/api/v1/redoc/#operation/projects_reindexer_create">http://localhost:8000/api/v1/redoc/#operation/projects_reindexer_create</a></p>
<p>Endpoint <strong>/projects/{project_pk}/reindexer/</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST <span class="s2">&quot;http://localhost:8000/api/v1/projects/1/reindexer/&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;accept: application/json&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Authorization: Token 8229898dccf960714a9fa22662b214005aa2b049&quot;</span> <span class="se">\</span>
-d <span class="s1">&#39;{</span>
<span class="s1">      &quot;description&quot;: &quot;reindex imdb reviews&quot;,</span>
<span class="s1">      &quot;indices&quot;: [&quot;imdb_reviews&quot;],</span>
<span class="s1">      &quot;fields&quot;: [&quot;review_text&quot;, &quot;doc_id&quot;],</span>
<span class="s1">      &quot;new_index&quot;: &quot;imdb_reviews_copy&quot;</span>
<span class="s1">    }&#39;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">81</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost:8000/api/v1/projects/1/reindexer/1/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;author_username&quot;</span><span class="p">:</span> <span class="s2">&quot;my_username&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;rewindex imdb reviews&quot;</span><span class="p">,</span>
    <span class="nt">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;review_text&quot;</span><span class="p">,</span> <span class="s2">&quot;doc_id&quot;</span><span class="p">],</span>
    <span class="nt">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;{\&quot;query\&quot;: {\&quot;match_all\&quot;: {}}}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;new_index&quot;</span><span class="p">:</span> <span class="s2">&quot;imdb_reviews_copy&quot;</span><span class="p">,</span>
    <span class="nt">&quot;random_size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;field_type&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&quot;task&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">153610</span><span class="p">,</span>
        <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span>
        <span class="nt">&quot;progress&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="nt">&quot;step&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;errors&quot;</span><span class="p">:</span> <span class="s2">&quot;[]&quot;</span><span class="p">,</span>
        <span class="nt">&quot;time_started&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-10-27T11:37:06.276108+02:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;last_update&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;time_completed&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;total&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;num_processed&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020 TEXTA.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/reindexer.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>