
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search &#8212; TEXTA Toolkit 2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Lexicon Miner" href="lexicon_miner.html" />
    <link rel="prev" title="Projects" href="projects.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/toolkit_logo.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="uaa.html">Third-Party Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="anonymizer.html">Anonymizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="importer.html">Dataset Importer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlp.html">MLP</a></li>
<li class="toctree-l1"><a class="reference internal" href="reindexer.html">Reindexer</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="health.html">Health</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Search</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#current-search">Current Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-search">Simple Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-search">Advanced Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search-options">Search Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#browsing-search-results">Browsing Search results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#saved-searches">Saved Searches</a></li>
<li class="toctree-l2"><a class="reference internal" href="#aggregations">Aggregations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lexicon_miner.html">Lexicon Miner</a></li>
<li class="toctree-l1"><a class="reference internal" href="embedding.html">Embedding</a></li>
<li class="toctree-l1"><a class="reference internal" href="topic_analyzer.html">Topic Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="tagger.html">Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="tagger_group.html">Tagger Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex_tagger.html">Regex Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex_tagger_group.html">Regex Tagger Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="torch_tagger.html">Torch Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="bert_tagger.html">Bert Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="projects.html" title="previous chapter">Projects</a></li>
      <li>Next: <a href="lexicon_miner.html" title="next chapter">Lexicon Miner</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="search">
<h1>Search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h1>
<p>The Search application is responsible for both creating the searches defining subsets of documents for Toolkit’s other applications and browsing-summarizing the data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to use <strong>Search</strong>, project must be selected in upper panel.</p>
</div>
<p>Search’s graphical interface consists of serveral important panels, which are depicted in <a class="reference internal" href="#search-panel"><span class="std std-numref">Fig. 25</span></a>.
We can collapse or open the panels by clicking on the arrow in the corner.</p>
<div class="figure align-default" id="id7">
<span id="search-panel"></span><img alt="_images/search_panel.png" src="_images/search_panel.png" />
<p class="caption"><span class="caption-number">Fig. 25 </span><span class="caption-text"><em>Search Panel</em></span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
<div class="legend">
<ol class="arabic simple">
<li><p><a class="reference internal" href="#currentsearch"><span class="std std-ref">Current Search</span></a></p></li>
<li><p><a class="reference internal" href="#savedsearches"><span class="std std-ref">Saved Searches</span></a></p></li>
<li><p><a class="reference internal" href="#aggregations"><span class="std std-ref">Aggregations</span></a></p></li>
</ol>
</div>
</div>
<div class="section" id="current-search">
<span id="currentsearch"></span><h2>Current Search<a class="headerlink" href="#current-search" title="Permalink to this headline">¶</a></h2>
<p>Data browsing and summarization depend on searches. Search consists of a set of constraints on <a class="reference internal" href="terminology.html#field-concept"><span class="std std-ref">field</span></a> values. We can define our constraints on the data using the <em>Current Search</em> panel.
Without saving the constraints, we are in a “test mode”, which means that we can use the search in real time, but we cannot use the search in other tools.
After saving the search, it is available also to other tools.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The search will be done on the Project’s dataset(s) chosen in the upper panel.</p>
</div>
<div class="figure align-default" id="id8">
<span id="id1"></span><img alt="_images/current_search.png" src="_images/current_search.png" />
<p class="caption"><span class="caption-number">Fig. 26 </span><span class="caption-text"><em>Current search</em></span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
<div class="legend">
<p>From left to right in the red box:</p>
<ol class="loweralpha simple">
<li><p>view query constructed with Current Search in a more suitable format for <a class="reference internal" href="terminology.html#elasticsearch"><span class="std std-ref">Elasticsearch</span></a>,</p></li>
<li><p>save the constructed search,</p></li>
<li><p>collapse Current Search panel.</p></li>
</ol>
</div>
</div>
<p>Current Searh divides into Simple Search and Advanced Search (look below).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Current match doesn’t differentiate lower and upper case (except regex constraint). This means that searching for “President” also matches “president”. If the case is important in the search, use regex constraint (see below).</p>
</div>
<div class="section" id="simple-search">
<h3>Simple Search<a class="headerlink" href="#simple-search" title="Permalink to this headline">¶</a></h3>
<p>Simple search searches for a word on all fields in the chosen dataset. Words separated with space (‘ ‘) are considered as a space-separated list - each word must occur in at least one field in the document.</p>
<div class="figure align-default" id="id9">
<span id="id2"></span><img alt="_images/simple_search.png" src="_images/simple_search.png" />
<p class="caption"><span class="caption-number">Fig. 27 </span><span class="caption-text"><em>Simple search</em>. ‘word1’, ‘word2’, ‘word3’ are searched from all the fields in the document. Only those which have all of them matched at least once, are returned.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="advanced-search">
<h3>Advanced Search<a class="headerlink" href="#advanced-search" title="Permalink to this headline">¶</a></h3>
<p>Advanced search searches for a constraint in a certain field in the chosen dataset. Constraints can be added on different fields in one search. Constrainst can be removed via the ‘X’-sign in upper right. The constraints can be divided into three: string constraint, date constraint and texta_tag constraint (look below). When the constraints are chosen the Search output can be seen via “Search”-button.</p>
<div class="section" id="string-constraint">
<h4>String constraint<a class="headerlink" href="#string-constraint" title="Permalink to this headline">¶</a></h4>
<p>One line equals one search item. This constraint has several operators. Look below for their functions.</p>
<table class="colwidths-given docutils align-default" id="id10">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Operators</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>and</p></td>
<td><p>all of the items (lines) are matched in the document</p></td>
</tr>
<tr class="row-odd"><td><p>or</p></td>
<td><p>at least one of the items (lines) is matched in the document</p></td>
</tr>
<tr class="row-even"><td><p>not</p></td>
<td><p>definetly none of the items are matched in the document</p></td>
</tr>
<tr class="row-odd"><td><p>phrase prefix</p></td>
<td><p>matches the beginning of the words (endings can differ, e.g. searching for ‘bribe’ gives us ‘bribe’, ‘bribery’, ‘bribetaking’, etc)</p></td>
</tr>
<tr class="row-even"><td><p>word</p></td>
<td><p>finds exact word written (similar to simple search)</p></td>
</tr>
<tr class="row-odd"><td><p>phrase</p></td>
<td><p>finds exact match for a phrase (more than one word in one line)</p></td>
</tr>
<tr class="row-even"><td><p>regex</p></td>
<td><p>takes the input as <a class="reference external" href="https://www.rexegg.com/regex-quickstart.html">a regular expression</a> and searches document accordingly. Nb! This is <a class="reference internal" href="terminology.html#elasticsearch"><span class="std std-ref">Elasticsearch</span></a> syntax.</p></td>
</tr>
<tr class="row-odd"><td><p>slop</p></td>
<td><p>defines how many words can be between the phrase words defined</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default" id="id11">
<span id="string-search"></span><img alt="_images/string_search.png" src="_images/string_search.png" />
<p class="caption"><span class="caption-number">Fig. 28 </span><span class="caption-text"><em>String constraint</em>. This string constraint is on field named “text”. It looks for documents that have either phrase “president Obama” or “president Trump” in it (or both). Since the Slop is 2, it also matches the phrase if it has 0-2 words between the words (e.g “president Barack Obama”). The “X” in the red square is for deleting this constraint.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>The string constraint has an option to add <a class="reference internal" href="lexicon_miner.html#lexiconminer"><span class="std std-ref">a saved lexicon’s</span></a> terms into the search (via button “Add lexicon”). This works only when there is at least one lexicon in the project.</p>
</div>
<div class="section" id="date-constraint">
<h4>Date constraint<a class="headerlink" href="#date-constraint" title="Permalink to this headline">¶</a></h4>
<p>Date constraint works only on a proper datefield. This outputs only those documents which datefield are within the chosen time range (starting day included and ending day excluded). The time range can be chosen by clicking on the little calendar in the right.</p>
<div class="figure align-default" id="id12">
<span id="id3"></span><img alt="_images/date_constraint.png" src="_images/date_constraint.png" />
<p class="caption"><span class="caption-number">Fig. 29 </span><span class="caption-text"><em>Date constraint</em></span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="texta-fact-constraint">
<h4>Texta_fact constraint<a class="headerlink" href="#texta-fact-constraint" title="Permalink to this headline">¶</a></h4>
<p>Texta_fact constraint helps to find certain <a class="reference internal" href="terminology.html#texta-fact"><span class="std std-ref">fact</span></a> or <a class="reference internal" href="terminology.html#texta-fact"><span class="std std-ref">facts</span></a> with certain values. You can find several different values at once with the little ‘+’-sign which adds one more value-line. Look in the table above for the operators’ meanings.</p>
<div class="figure align-default" id="id13">
<span id="tag-constraint1"></span><img alt="_images/tag_constraint1.png" src="_images/tag_constraint1.png" />
<p class="caption"><span class="caption-number">Fig. 30 </span><span class="caption-text"><em>Texta_fact fact constraints</em>. Search for documents that have at least one ORG fact in it and definetly no PER fact.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id14">
<span id="tag-constraint3"></span><img alt="_images/tag_constraint3.png" src="_images/tag_constraint3.png" />
<p class="caption"><span class="caption-number">Fig. 31 </span><span class="caption-text"><em>Texta_fact fact value constraint with or</em>. Texta_fact fact constraint enables choosing multible facts at once. For example this constraint outputs all documents that has at least one of the facts (COMPANY, EML, ADDR) in it.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id15">
<span id="tag-constraint2"></span><img alt="_images/tag_constraint2.png" src="_images/tag_constraint2.png" />
<p class="caption"><span class="caption-number">Fig. 32 </span><span class="caption-text"><em>Texta_fact fact value constraint</em>. Search for documents that have an ORG fact with either value “NATO” or value “European Union” in it (or both).</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<p>The same texta_fact constraints can be constructed automatically, when clicking on the texta_fact labels or values in the dataset texta_facts field.</p>
</div>
</div>
<div class="section" id="search-options">
<h3>Search Options<a class="headerlink" href="#search-options" title="Permalink to this headline">¶</a></h3>
<p>Look at the table below for the meanings of search options.</p>
<table class="colwidths-given docutils align-default" id="id16">
<caption><span class="caption-number">Table 2 </span><span class="caption-text">Search options</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Highlight facts</p></td>
<td><p>highlights all the facts in the text</p></td>
</tr>
<tr class="row-odd"><td><p>Only highlight matching facts</p></td>
<td><p>highlights only the facts that were looked for</p></td>
</tr>
<tr class="row-even"><td><p>Highlight searcher matches</p></td>
<td><p>highlights string constraints’ matches</p></td>
</tr>
<tr class="row-odd"><td><p>Show short version</p></td>
<td><p>shows certain amount of words before and after the match</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default" id="id17">
<span id="id4"></span><img alt="_images/search_options.png" src="_images/search_options.png" />
<p class="caption"><span class="caption-number">Fig. 33 </span><span class="caption-text"><em>Search Options</em>. Only texta_fact constraints will be highlighted in the results with these selected Search Options.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id18">
<span id="search-example1"></span><img alt="_images/search_example1.png" src="_images/search_example1.png" />
<p class="caption"><span class="caption-number">Fig. 34 </span><span class="caption-text"><em>Regex String Constraint</em>. Search for documents that have either “payoff” or “bribe[a-z]{0,2}” in it. Last of which means word ‘bribe’ with 0-2 extra letters (e.g “bribe”, “bribed”, “bribery”).</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id19">
<span id="search-combination"></span><img alt="_images/search_combination.png" src="_images/search_combination.png" />
<p class="caption"><span class="caption-number">Fig. 35 </span><span class="caption-text"><em>Combination of constraints</em>. Search for documents published in 2014, contain LOC facts with values “Russia” and “Ukraine” and the word “invasion”.</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="browsing-search-results">
<h3>Browsing Search results<a class="headerlink" href="#browsing-search-results" title="Permalink to this headline">¶</a></h3>
<p>If we click on “Search” button, we will see the matching documents in a tabular form (see <a class="reference internal" href="#search-results"><span class="std std-numref">Fig. 36</span></a>). The results might be updating while modifying the constraints.</p>
<div class="figure align-default" id="id20">
<span id="search-results"></span><a class="reference internal image-reference" href="_images/search_results.png"><img alt="_images/search_results.png" src="_images/search_results.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 36 </span><span class="caption-text"><em>Example Search Results</em></span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<p>If there are too many features (columns), we can hide or show them from the drop-down menu in the up left corner. We can select or deselect all of them together (<em>Select all</em>) or by clicking on them separately. We can also hide or get back the Searcher’s panels with <em>Toggle drawer</em> button. We can browse through Searcher’s results with the arrows in the upper right. We can also choose how many items per page would we want to see in the upper right.</p>
<div class="figure align-default" id="id21">
<span id="search-rt"></span><img alt="_images/search_results_toggle.png" src="_images/search_results_toggle.png" />
<p class="caption"><span class="caption-number">Fig. 37 </span><span class="caption-text"><em>Select Fields for Search Results</em></span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>API for scrolling can be found <a class="reference external" href="https://rest-dev.texta.ee/api/v1/projects/1/scroll/">here</a>.</p>
</div>
</div>
</div>
<div class="section" id="saved-searches">
<span id="savedsearches"></span><h2>Saved Searches<a class="headerlink" href="#saved-searches" title="Permalink to this headline">¶</a></h2>
<p>After having comed up with a suitable search, it can be saved for later use by clicking on the <strong>disk</strong> icon up-right in the Current Search panel. The <strong>eye</strong> icon next to the disk icon shows us the actual <a class="reference internal" href="terminology.html#elasticsearch"><span class="std std-ref">Elasticsearch</span></a> query built by choosing the Operators and words to search for.</p>
<p>After saving a search, it becomes available for using in Toolkit’s applications. For example, they can be used in browsing the search later again or applying in aggregations. The saved search can be sent to other users who have the permission to the project with a copied url.
This opens the saved search under the Current Search for the other user.
Saved searches can be opened in the Current Search simply by clicking on it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>API support for saving searches can be found <a class="reference external" href="https://rest-dev.texta.ee/api/v1/projects/1/searches/">here</a>.</p>
</div>
</div>
<div class="section" id="aggregations">
<span id="id6"></span><h2>Aggregations<a class="headerlink" href="#aggregations" title="Permalink to this headline">¶</a></h2>
<p>As fun as browsing through the data is, it is not always enough. Sometimes we want to get an overview of our data, such as topics over time or word distributions. Searcher allows to do all of that and more through the “Aggregations” panel.</p>
<p>Aggregations have two components - data and features it aggregates over. It will aggregate over the dataset we have under the Current Search. We can also exclude current search (meaning that ‘Aggregate over all data except the one we have currently active’) and choose the aggregation size. By defining a feature, we can group by that feature and get category counts. For example, lets assume we are interested in seeing how are the top words distributed in our sample data defined by our “bribe” search. For that we simply click on our bribe search under Saved Searches to get it as the current search.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt><strong>How are the significance scores calculated?</strong></dt><dd><p>The numbers returned for scores are primarily intended for ranking different suggestions sensibly rather than something easily understood by end users. The scores are derived from the doc frequencies in foreground and background sets. In brief, a term is considered significant if there is a noticeable difference in the frequency in which a term appears in the subset and in the background. The way the terms are ranked can be configured, <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-significanttext-aggregation.html">see “Parameters” section</a>.</p>
</dd>
</dl>
</div>
<p>One cool thing we can also do, is to visualize the frequency of texts with searched words in it on a timeline. We can do that if we have a proper date field (in Texta date format) in our data. Here we can visualize when were the words ‘bribe’, ‘bribery’ and ‘bribed’ used most frequently in our dataset.</p>
<p>We can also aggregate over <a class="reference internal" href="terminology.html#texta-fact"><span class="std std-ref">texta_facts</span></a> field in order to see the top entities under some fact. If we click on the black diagram button, we can scroll through the results. We see as many entities as we chose for our aggregation size.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020 TEXTA.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/searcher.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>