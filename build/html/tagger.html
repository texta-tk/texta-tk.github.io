
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tagger &#8212; TEXTA Toolkit 2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tagger Group" href="tagger_group.html" />
    <link rel="prev" title="Topic Analyzer" href="topic_analyzer.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/toolkit_logo.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="uaa.html">Third-Party Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="anonymizer.html">Anonymizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="importer.html">Dataset Importer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlp.html">MLP</a></li>
<li class="toctree-l1"><a class="reference internal" href="reindexer.html">Reindexer</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="health.html">Health</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="searcher.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="lexicon_miner.html">Lexicon Miner</a></li>
<li class="toctree-l1"><a class="reference internal" href="embedding.html">Embedding</a></li>
<li class="toctree-l1"><a class="reference internal" href="topic_analyzer.html">Topic Analyzer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tagger</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creation">Creation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gui">GUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">GUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tagger_group.html">Tagger Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex_tagger.html">Regex Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="regex_tagger_group.html">Regex Tagger Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="torch_tagger.html">Torch Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="bert_tagger.html">Bert Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="topic_analyzer.html" title="previous chapter">Topic Analyzer</a></li>
      <li>Next: <a href="tagger_group.html" title="next chapter">Tagger Group</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>Tagger<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="terminology.html#tagger-concept"><span class="std std-ref">Tagger</span></a> operates on saved searches and uses machine learning.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt><strong>How do Tagger and Tagger Groups differ?</strong></dt><dd><p>One model predicts whether a text is positive (True) or negative (False). That is, whether this text gets the label or not. Tagger trains only one model and predicts whether a text is similar to the query/dataset it was trained on or not.
Tagger Group trains several models at once. That means, it can predict several labels at once. Tagger Group trains on facts. You can have several values under a certain fact and for each value (if it has high enough frequency (<em>Minimum sample size</em>) a model is trained.</p>
</dd>
</dl>
</div>
<div class="section" id="creation">
<h2>Creation<a class="headerlink" href="#creation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gui">
<h3>GUI<a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h3>
<p>Create a new Tagger model by clicking on the ‘CREATE’ button in the top-left. Then choose the name for the new Tagger (<em>Description</em>), the indices and the fields the model learns from. If you choose two fields, the fields are concatenated together before the learning process. One field is also enough. Usually lemmatized texts are preferred, especially with morphologically complex languages, because it increases the frequency of some words (<em>eaten</em>, <em>eats</em> and <em>ate</em> will change to its lemma <em>eat</em> and are dealt as one word).</p>
<p>If <em>Query</em> is left empty, it will take all data in the active project as an input. You can also use saved searches as your desired input. This input will be the positive examples - later on, the Tagger tags data similar to this one.</p>
<p>By setting these three, you can now train a classifier. However, you can also fine-tune the classifier by changing additional parameters such as your previously trained <span class="xref std std-ref">embedding</span>, Vectorizer (Hashing Vectorizer, Count Vectorizer, Tfldf Vectorizer - read more about them <a class="reference external" href="https://scikit-learn.org/stable/modules/feature_extraction.html">here</a>) and Classifier (<a class="reference external" href="https://scikit-learn.org/stable/modules/linear_model.html#logistic-regression">Logistic Regression</a>, <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html">LinearSVC</a>). You can set the negative multiplier to change the ratio of negative examples. You can use the maximum sample size per class in case you want to limit the size of data the model trains on. After that, all that’s left is hitting the “Create”-button (scroll down a bit), seeing the training process and the result of the tagger.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>LinearSVC might give an error in case there’s not enough data in the search.</p>
</div>
<div class="figure align-default" id="id4">
<span id="create-tagger"></span><img alt="_images/create_tagger.png" src="_images/create_tagger.png" />
<p class="caption"><span class="caption-number">Fig. 54 </span><span class="caption-text"><em>Creating Bribe_tag tagger</em></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>Endpoint: <strong>/projects/{project_pk}/taggers/</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST <span class="s2">&quot;http://localhost:8000/api/v1/projects/11/taggers/&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;accept: application/json&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Authorization: Token 8229898dccf960714a9fa22662b214005aa2b049&quot;</span> <span class="se">\</span>
-d <span class="s1">&#39;{</span>
<span class="s1">        &quot;description&quot;: &quot;My tagger&quot;,</span>
<span class="s1">        &quot;fields&quot;: [&quot;comment_content_lemmas&quot;],</span>
<span class="s1">        &quot;vectorizer&quot;: &quot;Hashing Vectorizer&quot;,</span>
<span class="s1">        &quot;classifier&quot;: &quot;Logistic Regression&quot;,</span>
<span class="s1">        &quot;indices&quot;: [{&quot;name&quot;: &quot;texta_test_index&quot;}],</span>
<span class="s1">        &quot;stop_words&quot;: &quot;&quot;,</span>
<span class="s1">        &quot;maximum_sample_size&quot;: 10000,</span>
<span class="s1">        &quot;score_threshold&quot;: 0.0,</span>
<span class="s1">        &quot;negative_multiplier&quot;: 1,</span>
<span class="s1">    }&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="usage">
<span id="tagger-usage"></span><h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>GUI<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Whenever a new Tagger model is created, you can track its progress from the table under <em>Task</em>. If you click on the job, you can see all the training info, how long did it took, and check how successful it was. Let’s not forget that:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Recall is the ratio of correctly labeled positives among all true positives.</p></li>
<li><p>Precision is the ratio of correctly labeled positives among all instances that got a positive label.</p></li>
<li><p>F1 score is the harmonic mean of these two and should be more informative especially with unbalanced data.</p></li>
</ol>
</div></blockquote>
<p>The three dots under <em>Actions</em> gives you a list of extra actions to use.</p>
<p><em>List features</em> lists the word-features and their coefficients that the model used. Works with models that used Count Vectorizer or Tfldf Vectorizer since their output is displayable.</p>
<p><em>Stop words</em> is for adding stop words. Stop words are words that the model does not consider while looking for clues of similarities. It is wise to add the most frequent words in the list like <em>am</em>, <em>on</em>, <em>in</em>, <em>are</em>. Separate the words with space (‘ ‘).</p>
<p><em>Tag text</em> is to check how does the model work. If you click on that a window opens. You can paste there some text, choose to lemmatize it (necessary if your model was trained on a lemmatized text), and post it. You then receive the result (True if this text gets the tag and False otherwise) and the probability. Probability shows how confident is your model in its prediction.</p>
<p><em>Tag doc</em> is similar to <em>Tag text</em>, except the input is in the JSON format.</p>
<p><em>Tag random doc</em> takes a random instance from your dataset, displays it, and returns the result and the probability of this result being correct.</p>
<p><em>Edit</em> is for changing the description.</p>
<p><em>Retrain tagger</em> retrains the whole tagger model with all the chosen parameters. It’s useful in case your dataset changes or you have added some stop words.</p>
<p><em>Delete</em> is for deleting the model.</p>
<p>In the table view, you can also select several models and delete them all at once by clicking on the dustbin button next to the <em>CREATE</em> button in the top-left. If you have several models, you can search for the right one by their description or task status. If you have models on several pages you can change pages in the top-right.</p>
<div class="figure align-default" id="id5">
<span id="tagger-result"></span><a class="reference internal image-reference" href="_images/tagger_result.png"><img alt="_images/tagger_result.png" src="_images/tagger_result.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 55 </span><span class="caption-text"><em>Bribe_tag tagger</em></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="id3">
<h3>API<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Endpoint <strong>/projects/{project_pk}/taggers/{id}/tag_text/</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST <span class="s2">&quot;http://localhost:8000/api/v1/projects/11/taggers/2/tag_text/&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;accept: application/json&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Authorization: Token 8229898dccf960714a9fa22662b214005aa2b049&quot;</span> <span class="se">\</span>
-d <span class="s1">&#39;{</span>
<span class="s1">        &quot;text&quot;: &quot;mis su nimi on?&quot;,</span>
<span class="s1">        &quot;lemmatize&quot;: true</span>
<span class="s1">    }&#39;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="s2">&quot;My tagger&quot;</span><span class="p">,</span>
    <span class="nt">&quot;probability&quot;</span><span class="p">:</span><span class="mf">0.9898217973842874</span><span class="p">,</span>
    <span class="nt">&quot;tagger_id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020 TEXTA.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/tagger.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>